<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="cyy36@cam.ac.uk">
<meta name="dcterms.date" content="2025-06-11">

<title>Effects of age and gender on using gene alteration and expression markers as prognostic markers for diffuse large B cell lymphoma (DLBCL)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="Module1-assignment_files/libs/clipboard/clipboard.min.js"></script>
<script src="Module1-assignment_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Module1-assignment_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Module1-assignment_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="Module1-assignment_files/libs/quarto-html/popper.min.js"></script>
<script src="Module1-assignment_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Module1-assignment_files/libs/quarto-html/anchor.min.js"></script>
<link href="Module1-assignment_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Module1-assignment_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Module1-assignment_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Module1-assignment_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Module1-assignment_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Effects of age and gender on using gene alteration and expression markers as prognostic markers for diffuse large B cell lymphoma (DLBCL)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>cyy36@cam.ac.uk </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 11, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<center>
<img src="https://onlinecareeraccelerators.pace.cam.ac.uk/hubfs/CAM%20DS%20PACE/Professional%20and%20Continuing%20Education_V_reversed%20colour%201.svg" class="img-fluid">
</center>
<h3 style="text-align: center;" class="anchored">
MSt Healthcare Data Science
</h3>
<section id="authentication-of-practice" class="level4">
<h4 class="anchored" data-anchor-id="authentication-of-practice">Authentication of practice</h4>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td>I confirm that I have fully read and understood the <a href="https://vle.pace.cam.ac.uk/mod/page/view.php?id=2419694">assignment brief</a> for this module.</td>
<td><strong>Y</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="details" class="level4">
<h4 class="anchored" data-anchor-id="details">Details</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>Name: Chung Yan</td>
<td>Surname: Yu</td>
</tr>
<tr class="even">
<td>Submission Date</td>
<td>19-10-25</td>
</tr>
<tr class="odd">
<td>Word Count: whole assignment including codes</td>
<td></td>
</tr>
<tr class="even">
<td>Word Count: main body excluding abstract, references and supplementary materials</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="permission-to-share-your-assignment-delete-as-appropriate" class="level4">
<h4 class="anchored" data-anchor-id="permission-to-share-your-assignment-delete-as-appropriate">Permission to share your assignment: delete as appropriate</h4>
<p>I do give permission to share my assignment with future MSt participants.</p>
</section>
<section id="university-statement-of-originality" class="level4">
<h4 class="anchored" data-anchor-id="university-statement-of-originality">University statement of originality</h4>
<p>This assignment is the result of my own work and includes nothing which is the outcome of work done in collaboration except as declared in the Preface and specified in the text. It is not substantially the same as any that I have previously submitted for a degree or diploma or other qualification at the University of Cambridge or any other university or similar institution, or that is being concurrently submitted, except as declared in the Preface and specific in the text. I further state that no substantial part of my Portfolio has already been submitted, nor is being concurrently submitted for any such degree, diploma or other qualification at the University of Cambridge or any other university or similar institution except as declared in the Preface and specified in the text.</p>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td>I confirm the statement of originality as above</td>
<td><strong>Y</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="questions-for-reflection" class="level4">
<h4 class="anchored" data-anchor-id="questions-for-reflection">Questions for reflection</h4>
<p>Self-assessment is an important aspect of feedback literacy, which is, in turn, key to the development of expertise. As you proceed through the MSt Healthcare data science programme, we hope that you will make use of the following prompts to assess your own work on assignments. Specific assignment briefs will likely indicate which of these to address for which assessments, but, in general, we expect you to respond to one or two for each assignment on your course.</p>
<p>For each of the questions, do not spend too long answering – keep it brief. For each question you answer, limit yourself to no more than three items. And please remember, this is optional and developmental: these cover sheets are designed to create space for self-assessment and feedback dialogue, rather than additional assignment workload.</p>
<ol type="1">
<li>Which aspects of this assignment are you most uncertain about and/or would most like to receive feedback on?</li>
<li>What elements are you left pondering after this assignment that you would like to discuss further?</li>
<li>How have you incorporated feedback from peers and tutors into this assignment?</li>
<li>How, and to what extent, have you been able to incorporate feedback on previous course work into this assignment?</li>
<li>Using the wording in the rubric, how would you describe the quality of the different aspects of your work?</li>
</ol>
</section>
<section id="declaration-of-the-use-of-generative-ai" class="level3">
<h3 class="anchored" data-anchor-id="declaration-of-the-use-of-generative-ai">Declaration of the use of generative AI</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td>Which permitted use of generative AI are you acknowledging?</td>
<td>Semantic search of literature and notes, outline creation, code debugging, informed feedback</td>
</tr>
<tr class="even">
<td>Which generative AI tool did you use (name and version)?</td>
<td>Claude Code v2.0.3x (the version likely changed over usage), Claude Desktop v1.0.3x with PubMed Connector, M365 CoPilot</td>
</tr>
<tr class="odd">
<td>What did you use the tool for?</td>
<td>Searching for relevant journal publications, sanity check on coding strategies, collating notes in my Obsidian vault, debugging code by parsing error messages</td>
</tr>
<tr class="even">
<td>How have you used or changed the generative AI’s output</td>
<td>E.g. my collated notes always stay in point form so that I write out the paragraphs in my own words. Feedback provided by the GenAI models are weighed and assessed before being acted on.</td>
</tr>
</tbody>
</table>
</section>
<section id="abstract" class="level1">
<h1>Abstract</h1>
<p>Diffuse large B cell lymphoma (DLBCL) is the most common non-Hodgkin lymphoma, with prognosis influenced by diverse factors ranging from demographic features (age, gender) to integrated scoring systems such as the International Prognostic Index (IPI), and genetic mutations altering gene expression levels. Oncogenes MYC, BCL2 and BCL6 emerged with strong associations with DLBCL, yet how demographic factors interact with these genetic drivers remains understudied. This study analysed clinical and genomic data from 1001 DLBCL patients to investigate whether age and gender modify the prognostic value of these established oncogenes.</p>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Diffuse large B cell lymphoma (DLBCL) is the most common type of aggressive non-Hodgkin’s lymphoma (NHL) <span class="citation" data-cites="blood1997 WANG2023">(<a href="#ref-blood1997" role="doc-biblioref">The Non-Hodgkin’s Lymphoma Classification Project 1997</a>; <a href="#ref-WANG2023" role="doc-biblioref">Wang 2023</a>)</span>, with a wide range of factors contributing to prognosis. For a comparable and more comprehensive pre-treatment prognosis model, the international prognostic index (IPI) emerged as a standardised model for DLBCL and other aggressive NHLs <span class="citation" data-cites="shipp1993">(<a href="#ref-shipp1993" role="doc-biblioref">Shipp et al. 1993</a>)</span>, combining 5 factors: age, Ann Arbor stage classification, ECOG Performance Status, serum lactate dehydrogenase level and the number of extranodal sites of disease. By pooling factors together, the IPI outperformed simple disease stage classification models such as Ann Arbor. As prognosis models improved, so did treatment. The first generation chemotherapy of cyclophosphamide, doxorubicin, vincristine, and prednisone (CHOP) had a cure rate of 30-35% <span class="citation" data-cites="Fisher1993CHOP">(<a href="#ref-Fisher1993CHOP" role="doc-biblioref">Fisher et al. 1993</a>)</span>. With the addition of rituximab to the regiment (R-CHOP) and other advances, DLBCL becomes curable for more than 60% of patients <span class="citation" data-cites="johnson2012doublehit">(<a href="#ref-johnson2012doublehit" role="doc-biblioref">Johnson et al. 2012</a>)</span>.</p>
<p>While demographic factors such as age is already featured in IPI, others such as gender is not, and there is an established body of evidence to show the involvment of gender. From how males have higher hazard risks <span class="citation" data-cites="Carella2013male">(<a href="#ref-Carella2013male" role="doc-biblioref">Carella et al. 2013</a>)</span> to gender-associated pharmacokinetic differences in rituximab leading to worse treatment responses in males <span class="citation" data-cites="Habermann2014sexAge">(<a href="#ref-Habermann2014sexAge" role="doc-biblioref">Habermann 2014</a>)</span>. Beyond demographic and clinical factors, a series of genetic alterations came out as strong prognostic markers: BCL2 <span class="citation" data-cites="Gascoyne1997BCL2">(<a href="#ref-Gascoyne1997BCL2" role="doc-biblioref">Gascoyne et al. 1997</a>)</span>, BCL6 <span class="citation" data-cites="LoCoco1994BCL6">(<a href="#ref-LoCoco1994BCL6" role="doc-biblioref">Lo Coco et al. 1994</a>)</span> and MYC <span class="citation" data-cites="ChenevixTrench1986MYC">(<a href="#ref-ChenevixTrench1986MYC" role="doc-biblioref">Chenevix-Trench, Behm, and Westin 1986</a>)</span>. These changes are observed at both the genotypic and phenotypic levels, as translocation mutations and protein overexpression respectively <span class="citation" data-cites="Petrich2014MYCReview">(<a href="#ref-Petrich2014MYCReview" role="doc-biblioref">Petrich, Nabhan, and Smith 2014</a>)</span>. Furthermore, patients with varying combinations of these alterations have shown worse responses to R-CHOP treatments.</p>
<p>With the advent of machine learning methods came attempts to construct models based on clinical and genomic data. <span class="citation" data-cites="reddy2017paper">Reddy et al. (<a href="#ref-reddy2017paper" role="doc-biblioref">2017a</a>)</span> set out achieving this by first identifying likely genomic drivers for DLBCL, which included BCL2, BCL6, MYC as well as other candidates. The genotypic alteration data was further combined with phenotypic expression data along with cell-of-origin data to create a genomic risk model, outperforming IPI in terms of accuracy. Given the breadth of <span class="citation" data-cites="reddy2017paper">Reddy et al. (<a href="#ref-reddy2017paper" role="doc-biblioref">2017a</a>)</span>’s work, the effects of gender and age on the prognostic powers of these markers were unfortunately understudied. Given the importance of these two factors are already well established in other studies and cohorts, it is the goal of this study to investigate</p>
<p>Here the same dataset from the same genomic risk model study by <span class="citation" data-cites="reddy2017paper">Reddy et al. (<a href="#ref-reddy2017paper" role="doc-biblioref">2017a</a>)</span> is utilised, as their <a href="https://ars.els-cdn.com/content/image/1-s2.0-S0092867417311212-mmc1.xlsx">Supplementary Table S1</a>. The dataset <span class="citation" data-cites="reddy2017dataset">(<a href="#ref-reddy2017dataset" role="doc-biblioref">Reddy et al. 2017b</a>)</span> comprises of 1001 DLBCL patients with 35 variables including demographic, clinical and genomic data. Key variables for this study include: age (continuous), gender (male/female), gene alteration information of MYC, BCL2 and BCL6, gene expression levels of MYC, BCL2 and BCL6, response to initial treatment, and overall survival outcomes.</p>
</section>
<section id="methods" class="level1">
<h1>Methods</h1>
<p>The dataset was loaded directly from ScienceDirect’s <a href="https://ars.els-cdn.com/content/image/1-s2.0-S0092867417311212-mmc1.xlsx">S1 Table</a></p>
</section>
<section id="results" class="level1">
<h1>Results</h1>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
</section>
<section id="conclusion-1" class="level1">
<h1>Conclusion</h1>
</section>
<section id="references" class="level1">
<h1>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Carella2013male" class="csl-entry" role="listitem">
Carella, Angelo M., Carmino A. de Souza, Stefano Luminari, Luigi Marcheselli, Annalisa Chiappella, Alice di Rocco, Marina Cesaretti, et al. 2013. <span>“Prognostic Role of Gender in Diffuse Large b-Cell Lymphoma Treated with Rituximab Containing Regimens: A Fondazione Italiana Linfomi/Grupo de Estudos Em Moléstias Onco-Hematológicas Retrospective Study.”</span> <em>Leukemia &amp; Lymphoma</em> 54 (1): 53–57. <a href="https://doi.org/10.3109/10428194.2012.691482">https://doi.org/10.3109/10428194.2012.691482</a>.
</div>
<div id="ref-ChenevixTrench1986MYC" class="csl-entry" role="listitem">
Chenevix-Trench, Georgia, Frederick G. Behm, and Eric H. Westin. 1986. <span>“Somatic Rearrangement of the c-Myc Oncogene in Primary Human Diffuse Large-Cell Lymphoma.”</span> <em>International Journal of Cancer</em> 38 (4): 513–16. https://doi.org/<a href="https://doi.org/10.1002/ijc.2910380410">https://doi.org/10.1002/ijc.2910380410</a>.
</div>
<div id="ref-Fisher1993CHOP" class="csl-entry" role="listitem">
Fisher, Richard I., Ellen R. Gaynor, Steve Dahlberg, Martin M. Oken, Thomas M. Grogan, Evonne M. Mize, John H. Glick, Charles A. Coltman, and Thomas P. Miller. 1993. <span>“Comparison of a Standard Regimen (CHOP) with Three Intensive Chemotherapy Regimens for Advanced Non-Hodgkin’s Lymphoma.”</span> <em>New England Journal of Medicine</em> 328 (14): 1002–6. <a href="https://doi.org/10.1056/NEJM199304083281404">https://doi.org/10.1056/NEJM199304083281404</a>.
</div>
<div id="ref-Gascoyne1997BCL2" class="csl-entry" role="listitem">
Gascoyne, Randy D., Sheryle A. Adomat, Stanislaw Krajewski, Maryla Krajewska, Douglas E. Horsman, Anthony W. Tolcher, Susan E. O’Reilly, et al. 1997. <span>“Prognostic Significance of Bcl-2 Protein Expression and Bcl-2 Gene Rearrangement in Diffuse Aggressive Non-Hodgkin’s Lymphoma.”</span> <em>Blood</em> 90 (1): 244–51. https://doi.org/<a href="https://doi.org/10.1182/blood.V90.1.244">https://doi.org/10.1182/blood.V90.1.244</a>.
</div>
<div id="ref-Habermann2014sexAge" class="csl-entry" role="listitem">
Habermann, Thomas M. 2014. <span>“Is Rituximab One for All Ages and Each Sex?”</span> <em>Blood</em> 123 (5): 602–3. <a href="https://doi.org/10.1182/blood-2013-12-543314">https://doi.org/10.1182/blood-2013-12-543314</a>.
</div>
<div id="ref-johnson2012doublehit" class="csl-entry" role="listitem">
Johnson, Nathalie A., Graham W. Slack, Kerry J. Savage, Joseph M. Connors, Susana Ben-Neriah, Sanja Rogic, David W. Scott, et al. 2012. <span>“Concurrent Expression of MYC and BCL2 in Diffuse Large b-Cell Lymphoma Treated with Rituximab Plus Cyclophosphamide, Doxorubicin, Vincristine, and Prednisone.”</span> <em>Journal of Clinical Oncology</em> 30 (28): 3452–59. <a href="https://doi.org/10.1200/JCO.2011.41.0985">https://doi.org/10.1200/JCO.2011.41.0985</a>.
</div>
<div id="ref-LoCoco1994BCL6" class="csl-entry" role="listitem">
Lo Coco, Francesco, Bihui H. Ye, Florigio Lista, Paolo Corradini, Kenneth Offit, Daniel M. Knowles, R. S. K. Chaganti, and Riccardo Dalla-Favera. 1994. <span>“Rearrangements of the BCL6 Gene in Diffuse Large Cell Non-Hodgkin’s Lymphoma.”</span> <em>Blood</em> 83 (7): 1757–59. https://doi.org/<a href="https://doi.org/10.1182/blood.V83.7.1757.1757">https://doi.org/10.1182/blood.V83.7.1757.1757</a>.
</div>
<div id="ref-Petrich2014MYCReview" class="csl-entry" role="listitem">
Petrich, Adam M., Chadi Nabhan, and Sonali M. Smith. 2014. <span>“MYC-Associated and Double-Hit Lymphomas: A Review of Pathobiology, Prognosis, and Therapeutic Approaches.”</span> <em>Cancer</em> 120 (24): 3884–95. https://doi.org/<a href="https://doi.org/10.1002/cncr.28899">https://doi.org/10.1002/cncr.28899</a>.
</div>
<div id="ref-reddy2017paper" class="csl-entry" role="listitem">
Reddy, Anupama, Jenny Zhang, Nicholas S Davis, Andrea B Moffitt, Cassandra L Love, Alexander Waldrop, Sirpa Leppa, et al. 2017a. <span>“Genetic and Functional Drivers of Diffuse Large b Cell Lymphoma.”</span> <em>Cell</em> 171 (2): 481–494.e15. <a href="https://doi.org/10.1016/j.cell.2017.09.027">https://doi.org/10.1016/j.cell.2017.09.027</a>.
</div>
<div id="ref-reddy2017dataset" class="csl-entry" role="listitem">
———, et al. 2017b. <span>“Table S1. Clinical Information and Genetic Alteration Data for 1,001 DLBCL Samples, Related to Figure 1 in "Genetic and Functional Drivers of Diffuse Large b Cell Lymphoma".”</span> Supplementary Material S1, Cell, doi: 10.1016/j.cell.2017.09.027.
</div>
<div id="ref-shipp1993" class="csl-entry" role="listitem">
Shipp, Margaret A, David P Harrington, James R Anderson, James O Armitage, Gianni Bonadonna, Günter Brittinger, Fernando Cabanillas, et al. 1993. <span>“A Predictive Model for Aggressive Non-Hodgkin’s Lymphoma.”</span> <em>New England Journal of Medicine</em> 329 (14): 987–94. <a href="https://doi.org/10.1056/NEJM199309303291402">https://doi.org/10.1056/NEJM199309303291402</a>.
</div>
<div id="ref-blood1997" class="csl-entry" role="listitem">
The Non-Hodgkin’s Lymphoma Classification Project. 1997. <span>“A Clinical Evaluation of the International Lymphoma Study Group Classification of Non-Hodgkin’s Lymphoma.”</span> <em>Blood</em> 89 (11): 3909–18. <a href="https://doi.org/10.1182/blood.V89.11.3909">https://doi.org/10.1182/blood.V89.11.3909</a>.
</div>
<div id="ref-WANG2023" class="csl-entry" role="listitem">
Wang, Sophia S. 2023. <span>“Epidemiology and Etiology of Diffuse Large b-Cell Lymphoma.”</span> <em>Seminars in Hematology</em> 60 (5): 255–66. https://doi.org/<a href="https://doi.org/10.1053/j.seminhematol.2023.11.004">https://doi.org/10.1053/j.seminhematol.2023.11.004</a>.
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>